diff --git a/provider-portal/src/pages/incidents/incidents/blocks/incidents/IncidentsTable.tsx b/provider-portal/src/pages/incidents/incidents/blocks/incidents/IncidentsTable.tsx
index 4fa689b..5c4ea07 100644
--- a/provider-portal/src/pages/incidents/incidents/blocks/incidents/IncidentsTable.tsx
+++ b/provider-portal/src/pages/incidents/incidents/blocks/incidents/IncidentsTable.tsx
@@ -3,6 +3,8 @@ import { Link, useLocation, useNavigate } from 'react-router-dom';
 import {
   DataGrid,
   DataGridColumnHeader,
+  DataGridRowSelect,
+  DataGridRowSelectAll,
   KeenIcon,
   Menu,
   MenuItem,
@@ -33,6 +35,7 @@ import { useLanguage } from '@/i18n';
 import { fetchAllIncidents, deleteIncident, fetchSingleIncident, fetchBspAnalysis, fetchIncidentCustomers, exportIncidentPdf, fetchIncidentStatistics } from '@/services/api';
 import { ModalDeleteConfirmation } from '@/partials/modals/delete-confirmation';
 import { ViewToggle } from './ViewToggle';
+import { IncidentDetailsModal } from './IncidentDetailsModal';
 
 interface IColumnFilterProps<TData, TValue> {
   column: Column<TData, TValue>;
@@ -55,6 +58,20 @@ const IncidentsTable = ({ activeView, onViewChange }: IncidentsTableProps) => {
   const [loadingReport, setLoadingReport] = useState(false);
   const [bspAnalysisData, setBspAnalysisData] = useState<any>(null);
   const [loadingBspAnalysis, setLoadingBspAnalysis] = useState(false);
+  const [selectedRows, setSelectedRows] = useState<RowSelectionState>({});
+  const [isBulkDeleteModalOpen, setIsBulkDeleteModalOpen] = useState(false);
+  const [isDeletingBulk, setIsDeletingBulk] = useState(false);
+  const [activeModalTab, setActiveModalTab] = useState<'details' | 'bsp'>('details');
+
+  // Collapsible section states - all closed by default
+  const [collapsedSections, setCollapsedSections] = useState<Record<string, boolean>>({
+    basicInfo: false,
+    whatHappened: true,
+    leadUpTriggers: true,
+    duringIncident: true,
+    responseActions: true,
+    causesFactors: true
+  });
 
   // Filter states
   const [participants, setParticipants] = useState<any[]>([]);
@@ -139,10 +156,27 @@ const IncidentsTable = ({ activeView, onViewChange }: IncidentsTableProps) => {
     }
   };
 
+  const toggleSection = (sectionKey: string) => {
+    setCollapsedSections(prev => ({
+      ...prev,
+      [sectionKey]: !prev[sectionKey]
+    }));
+  };
+
   const closeReportModal = () => {
     setShowReportModal(false);
     setSelectedIncidentDetails(null);
     setBspAnalysisData(null);
+    setActiveModalTab('details'); // Reset to details tab when closing
+    // Reset collapsed sections - all closed by default
+    setCollapsedSections({
+      basicInfo: false,
+      whatHappened: true,
+      leadUpTriggers: true,
+      duringIncident: true,
+      responseActions: true,
+      causesFactors: true
+    });
   };
 
   const getSeverityBadgeClass = (severity: string) => {
@@ -349,6 +383,8 @@ const IncidentsTable = ({ activeView, onViewChange }: IncidentsTableProps) => {
       }
 
       console.log('Processed incidents data:', incidentsData);
+      console.log('üîç DEBUG - First incident sample:', incidentsData[0]);
+      console.log('üîç DEBUG - Incident IDs:', incidentsData.map((inc: any) => inc.id));
 
       // Store all incidents for export
       setAllIncidentsData(incidentsData);
@@ -369,6 +405,17 @@ const IncidentsTable = ({ activeView, onViewChange }: IncidentsTableProps) => {
 
   const columns = useMemo<ColumnDef<IIncidentsData>[]>(
     () => [
+      // Selection column
+      {
+        accessorKey: 'id',
+        header: () => <DataGridRowSelectAll />,
+        cell: ({ row }) => <DataGridRowSelect row={row} />,
+        enableSorting: false,
+        enableHiding: false,
+        meta: {
+          headerClassName: 'w-0'
+        }
+      },
       // 1. Date
       {
         accessorFn: (row) => row.incident_date_time,
@@ -384,7 +431,10 @@ const IncidentsTable = ({ activeView, onViewChange }: IncidentsTableProps) => {
         cell: (info) => {
           const { date, time } = formatDateTime(info.row.original.incident_date_time);
           return (
-            <div className="flex flex-col gap-0.5">
+            <div
+              className="flex flex-col gap-0.5 cursor-pointer"
+              onClick={() => handleViewDetails(info.row.original.id)}
+            >
               <div className="text-sm text-gray-800 font-medium">{date}</div>
               {time && <div className="text-xs text-gray-600">{time}</div>}
             </div>
@@ -409,7 +459,10 @@ const IncidentsTable = ({ activeView, onViewChange }: IncidentsTableProps) => {
         ),
         cell: ({ row }) => {
           return (
-            <div className="flex items-center gap-2">
+            <div
+              className="flex items-center gap-2 cursor-pointer"
+              onClick={() => handleViewDetails(row.original.id)}
+            >
               <div className="flex flex-col gap-0.5">
                 <div className="text-sm text-primary font-medium">#{row.original.incident_number}</div>
               </div>
@@ -439,7 +492,10 @@ const IncidentsTable = ({ activeView, onViewChange }: IncidentsTableProps) => {
               ? `${info.row.original.customer.first_name || ''} ${info.row.original.customer.last_name || ''}`.trim()
               : 'N/A');
           return (
-            <div className="flex items-center text-gray-800 font-normal gap-1.5">
+            <div
+              className="flex items-center text-gray-800 font-normal gap-1.5 cursor-pointer"
+              onClick={() => handleViewDetails(info.row.original.id)}
+            >
               {participant}
             </div>
           );
@@ -473,7 +529,10 @@ const IncidentsTable = ({ activeView, onViewChange }: IncidentsTableProps) => {
               ? incidentType
               : 'N/A';
           return (
-            <div className="flex items-center text-gray-800 dark:text-gray-200 font-normal gap-1.5">
+            <div
+              className="flex items-center text-gray-800 dark:text-gray-200 font-normal gap-1.5 cursor-pointer"
+              onClick={() => handleViewDetails(info.row.original.id)}
+            >
               {typeName}
             </div>
           );
@@ -496,7 +555,10 @@ const IncidentsTable = ({ activeView, onViewChange }: IncidentsTableProps) => {
         ),
         cell: (info) => {
           return (
-            <span className={`badge ${getSeverityBadgeClass(info.row.original.severity)} badge-outline rounded-full`}>
+            <span
+              className={`badge ${getSeverityBadgeClass(info.row.original.severity)} badge-outline rounded-full cursor-pointer`}
+              onClick={() => handleViewDetails(info.row.original.id)}
+            >
               {info.row.original.severity || 'N/A'}
             </span>
           );
@@ -592,7 +654,10 @@ const IncidentsTable = ({ activeView, onViewChange }: IncidentsTableProps) => {
         ),
         cell: (info) => {
           return (
-            <div className="flex justify-center">
+            <div
+              className="flex justify-center cursor-pointer"
+              onClick={() => handleViewDetails(info.row.original.id)}
+            >
               {info.row.original.restrictive_practice_used ? (
                 <span className="badge badge-warning badge-outline rounded-full badge-sm">Yes</span>
               ) : (
@@ -619,7 +684,10 @@ const IncidentsTable = ({ activeView, onViewChange }: IncidentsTableProps) => {
         ),
         cell: (info) => {
           return (
-            <span className={`badge ${getStatusBadgeClass(info.row.original.status)} badge-outline rounded-full`}>
+            <span
+              className={`badge ${getStatusBadgeClass(info.row.original.status)} badge-outline rounded-full cursor-pointer`}
+              onClick={() => handleViewDetails(info.row.original.id)}
+            >
               {getStatusDisplayName(info.row.original.status)}
             </span>
           );
@@ -666,21 +734,52 @@ const IncidentsTable = ({ activeView, onViewChange }: IncidentsTableProps) => {
   );
 
   const handleRowSelection = (state: RowSelectionState) => {
-    const selectedRowIds = Object.keys(state);
-    if (selectedRowIds.length > 0) {
-      toast(`Total ${selectedRowIds.length} are selected.`, {
-        description: `Selected row IDs: ${selectedRowIds}`,
-        action: {
-          label: 'Undo',
-          onClick: () => console.log('Undo')
-        }
-      });
-    }
+    console.log('üîç DEBUG - Row selection changed:', state);
+    setSelectedRows(state);
   };
 
   const handleDeleteIncident = async () => {
     if (selectedId) {
-      await deleteIncident(selectedId);
+      try {
+        await deleteIncident(selectedId);
+        toast.success('Incident deleted successfully');
+      } catch (error: any) {
+        toast.error(error?.response?.data?.message || 'Failed to delete incident');
+      }
+    }
+  };
+
+  const handleBulkDelete = async () => {
+    const selectedIds = Object.keys(selectedRows);
+    console.log('üîç DEBUG - Selected rows state:', selectedRows);
+    console.log('üîç DEBUG - Selected IDs from keys:', selectedIds);
+    console.log('üîç DEBUG - Converting to numbers:', selectedIds.map(id => Number(id)));
+
+    if (selectedIds.length === 0) return;
+
+    setIsDeletingBulk(true);
+    try {
+      // Delete incidents one by one
+      const deletePromises = selectedIds.map(id => {
+        const numId = Number(id);
+        console.log('üîç DEBUG - Deleting incident with ID:', numId);
+        return deleteIncident(numId);
+      });
+      await Promise.all(deletePromises);
+
+      toast.success(`Successfully deleted ${selectedIds.length} incident${selectedIds.length > 1 ? 's' : ''}`);
+
+      // Clear selection and close modal
+      setSelectedRows({});
+      setIsBulkDeleteModalOpen(false);
+
+      // Refresh the data grid
+      setRefreshKey(prev => prev + 1);
+    } catch (error) {
+      console.error('Error deleting incidents:', error);
+      toast.error('Failed to delete some incidents. Please try again.');
+    } finally {
+      setIsDeletingBulk(false);
     }
   };
 
@@ -849,12 +948,30 @@ const IncidentsTable = ({ activeView, onViewChange }: IncidentsTableProps) => {
   const Toolbar = () => {
     const hasActiveFilters = selectedParticipant !== 'all' || selectedSeverity !== 'all' ||
       selectedStatus !== 'all' || selectedRestrictive !== 'all' || dateFrom || dateTo;
+    const selectedCount = Object.keys(selectedRows).length;
 
     return (
       <>
         <div className="card-header flex-wrap px-5 py-5 border-b-0">
-          <h3 className="card-title">Incidents</h3>
+          <h3 className="card-title">
+            Incidents
+            {selectedCount > 0 && (
+              <span className="badge badge-sm badge-primary ms-2">{selectedCount} selected</span>
+            )}
+          </h3>
           <div className="flex flex-wrap gap-2 items-center">
+            {/* Bulk Delete Button - shown when rows are selected */}
+            {selectedCount > 0 && (
+              <button
+                type="button"
+                onClick={() => setIsBulkDeleteModalOpen(true)}
+                className="btn btn-sm btn-danger flex items-center gap-1.5"
+              >
+                <KeenIcon icon="trash" className="text-base" />
+                <span>Delete ({selectedCount})</span>
+              </button>
+            )}
+
             {/* View Toggle */}
             <ViewToggle activeView={activeView} onViewChange={onViewChange} />
 
@@ -1098,13 +1215,19 @@ const IncidentsTable = ({ activeView, onViewChange }: IncidentsTableProps) => {
         key={refreshKey}
         columns={columns}
         rowSelection={true}
+        getRowId={(row: any) => {
+          console.log('üîç DEBUG - getRowId called with row:', row);
+          console.log('üîç DEBUG - Returning ID:', String(row.id));
+          return String(row.id);
+        }}
+        onRowSelectionChange={handleRowSelection}
         serverSide={true}
         onFetchData={fetchIncidentsData}
-        onRowSelectionChange={handleRowSelection}
         pagination={{ size: 10 }}
         layout={{ card: true }}
         toolbar={<Toolbar />}
       />
+      {/* Single Delete Confirmation Modal */}
       <ModalDeleteConfirmation
         open={isModalOpen}
         onOpenChange={() => {
@@ -1122,1166 +1245,35 @@ const IncidentsTable = ({ activeView, onViewChange }: IncidentsTableProps) => {
         }}
       />
 
-      {/* Report Modal */}
-      {showReportModal && (
-        <div
-          style={{
-            position: 'fixed',
-            top: 0,
-            left: 0,
-            right: 0,
-            bottom: 0,
-            zIndex: 1000,
-            backgroundColor: 'rgba(0, 0, 0, 0.6)',
-            display: 'flex',
-            alignItems: 'center',
-            justifyContent: 'center',
-            padding: '20px',
-            overflowY: 'auto'
-          }}
-          onClick={(e) => {
-            if (e.target === e.currentTarget) {
-              closeReportModal();
-            }
-          }}
-        >
-          <style>
-            {`
-              @keyframes spin {
-                from { transform: rotate(0deg); }
-                to { transform: rotate(360deg); }
-              }
-              @keyframes pulse {
-                0%, 100% { opacity: 1; }
-                50% { opacity: 0.5; }
-              }
-              @keyframes bounce {
-                0%, 100% { transform: translateY(0); }
-                50% { transform: translateY(-10px); }
-              }
-            `}
-          </style>
-          <div
-            style={{
-              backgroundColor: 'white',
-              borderRadius: '8px',
-              maxWidth: '1200px',
-              width: '100%',
-              maxHeight: '90vh',
-              display: 'flex',
-              flexDirection: 'column',
-              boxShadow: '0 10px 40px rgba(0,0,0,0.3)'
-            }}
-            onClick={(e) => e.stopPropagation()}
-          >
-            <div className="modal-content" style={{ display: 'flex', flexDirection: 'column', height: '100%' }}>
-              {/* Modal Header */}
-              <div className="modal-header" style={{ padding: '20px 24px', borderBottom: '1px solid #e5e7eb', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
-                <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
-                  <h3 className="modal-title" style={{ fontSize: '1.5rem', fontWeight: 'bold', margin: 0 }}>
-                    Incident Details
-                  </h3>
-                  <span className="badge badge-success" style={{ fontSize: '0.75rem', padding: '4px 8px' }}>
-                    <i className="ki-outline ki-check-circle text-xs mr-1"></i>
-                    NDIS
-                  </span>
-                </div>
-                <div style={{ display: 'flex', gap: '8px', alignItems: 'center' }}>
-                  <button
-                    type="button"
-                    className="btn btn-sm btn-light"
-                    onClick={() => selectedIncidentDetails && exportIncidentPdf(selectedIncidentDetails.id)}
-                    disabled={!selectedIncidentDetails}
-                    style={{ cursor: 'pointer' }}
-                  >
-                    <i className="ki-outline ki-file-down text-base mr-1"></i>
-                    Export
-                  </button>
-                  <button
-                    type="button"
-                    className="btn btn-sm btn-icon btn-light"
-                    onClick={() => {
-                      if (selectedIncidentDetails) {
-                        setSelectedId(selectedIncidentDetails.id);
-                        setShowReportModal(false);
-                        setIsModalOpen(true);
-                      }
-                    }}
-                    style={{ cursor: 'pointer' }}
-                  >
-                    <i className="ki-outline ki-trash text-base"></i>
-                  </button>
-                  <button
-                    type="button"
-                    className="btn btn-sm btn-icon btn-light"
-                    onClick={closeReportModal}
-                    style={{ cursor: 'pointer' }}
-                  >
-                    <i className="ki-outline ki-cross text-base"></i>
-                  </button>
-                </div>
-              </div>
-
-              {/* Modal Body */}
-              <div className="modal-body" style={{ flex: 1, overflowY: 'auto', padding: '24px' }}>
-                {loadingReport ? (
-                  <div style={{
-                    display: 'flex',
-                    flexDirection: 'column',
-                    alignItems: 'center',
-                    justifyContent: 'center',
-                    minHeight: '400px',
-                    padding: '40px 20px'
-                  }}>
-                    <div style={{
-                      position: 'relative',
-                      width: '120px',
-                      height: '120px',
-                      marginBottom: '32px'
-                    }}>
-                      {/* Outer rotating ring */}
-                      <div style={{
-                        position: 'absolute',
-                        width: '100%',
-                        height: '100%',
-                        border: '4px solid #e5e7eb',
-                        borderTop: '4px solid #3b82f6',
-                        borderRadius: '50%',
-                        animation: 'spin 1s linear infinite'
-                      }}></div>
-                      {/* Middle rotating ring */}
-                      <div style={{
-                        position: 'absolute',
-                        width: '80%',
-                        height: '80%',
-                        top: '10%',
-                        left: '10%',
-                        border: '4px solid #e5e7eb',
-                        borderBottom: '4px solid #3b82f6',
-                        borderRadius: '50%',
-                        animation: 'spin 1.5s linear infinite reverse'
-                      }}></div>
-                      {/* Center icon */}
-                      <div style={{
-                        position: 'absolute',
-                        width: '100%',
-                        height: '100%',
-                        display: 'flex',
-                        alignItems: 'center',
-                        justifyContent: 'center'
-                      }}>
-                        <i className="ki-outline ki-document text-4xl text-primary" style={{
-                          animation: 'pulse 2s ease-in-out infinite'
-                        }}></i>
-                      </div>
-                    </div>
-
-                    <div style={{ textAlign: 'center' }}>
-                      <h4 style={{
-                        fontSize: '1.25rem',
-                        fontWeight: '600',
-                        color: '#111827',
-                        marginBottom: '8px'
-                      }}>
-                        Loading Incident Report
-                      </h4>
-                      <p style={{
-                        fontSize: '0.875rem',
-                        color: '#6b7280',
-                        marginBottom: '16px'
-                      }}>
-                        Fetching incident details and AI-generated reports...
-                      </p>
-
-                      {/* Progress dots */}
-                      <div style={{
-                        display: 'flex',
-                        gap: '8px',
-                        justifyContent: 'center',
-                        alignItems: 'center'
-                      }}>
-                        <div style={{
-                          width: '8px',
-                          height: '8px',
-                          borderRadius: '50%',
-                          backgroundColor: '#3b82f6',
-                          animation: 'bounce 1.4s ease-in-out infinite'
-                        }}></div>
-                        <div style={{
-                          width: '8px',
-                          height: '8px',
-                          borderRadius: '50%',
-                          backgroundColor: '#3b82f6',
-                          animation: 'bounce 1.4s ease-in-out 0.2s infinite'
-                        }}></div>
-                        <div style={{
-                          width: '8px',
-                          height: '8px',
-                          borderRadius: '50%',
-                          backgroundColor: '#3b82f6',
-                          animation: 'bounce 1.4s ease-in-out 0.4s infinite'
-                        }}></div>
-                      </div>
-                    </div>
-                  </div>
-                ) : selectedIncidentDetails ? (
-                  <div className="space-y-6">
-                    {/* BSP ANALYSIS SECTION */}
-                    {loadingBspAnalysis ? (
-                      <div style={{
-                        backgroundColor: '#eff6ff',
-                        borderLeft: '4px solid #6b46c1',
-                        borderRadius: '8px',
-                        padding: '24px',
-                        marginBottom: '24px'
-                      }}>
-                        <div style={{
-                          display: 'flex',
-                          justifyContent: 'space-between',
-                          alignItems: 'flex-start',
-                          marginBottom: '24px'
-                        }}>
-                          <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
-                            <i className="ki-outline ki-abstract-26" style={{ fontSize: '24px', color: '#6b46c1' }}></i>
-                            <h4 style={{ fontSize: '1.125rem', fontWeight: '600', color: '#1f2937', margin: 0 }}>
-                              AI-Powered BSP Analysis
-                            </h4>
-                          </div>
-                          <button
-                            type="button"
-                            className="btn btn-sm btn-primary"
-                            disabled
-                            style={{ cursor: 'not-allowed' }}
-                          >
-                            <i className="ki-outline ki-abstract-26 text-sm mr-1"></i>
-                            Analyzing...
-                          </button>
-                        </div>
-                        <div style={{
-                          display: 'flex',
-                          flexDirection: 'column',
-                          alignItems: 'center',
-                          justifyContent: 'center',
-                          padding: '40px 20px'
-                        }}>
-                          <div style={{
-                            position: 'relative',
-                            width: '80px',
-                            height: '80px',
-                            marginBottom: '24px'
-                          }}>
-                            <div style={{
-                              position: 'absolute',
-                              width: '100%',
-                              height: '100%',
-                              border: '4px solid #dbeafe',
-                              borderTop: '4px solid #3b82f6',
-                              borderRadius: '50%',
-                              animation: 'spin 1s linear infinite'
-                            }}></div>
-                            <div style={{
-                              position: 'absolute',
-                              width: '100%',
-                              height: '100%',
-                              display: 'flex',
-                              alignItems: 'center',
-                              justifyContent: 'center'
-                            }}>
-                              <i className="ki-outline ki-abstract-26" style={{ fontSize: '32px', color: '#3b82f6' }}></i>
-                            </div>
-                          </div>
-                          <p style={{ fontSize: '1rem', color: '#3b82f6', marginBottom: '8px', textAlign: 'center' }}>
-                            Analyzing incident against Behavior Support Plan...
-                          </p>
-                          <p style={{ fontSize: '0.875rem', color: '#60a5fa', textAlign: 'center' }}>
-                            Maps triggers, strategies, and risk factors against the participant's BSP
-                          </p>
-                        </div>
-                      </div>
-                    ) : bspAnalysisData?.bsp_analysis ? (
-                      <div style={{
-                        backgroundColor: 'white',
-                        borderLeft: '4px solid #6b46c1',
-                        borderRadius: '8px',
-                        padding: '24px',
-                        marginBottom: '24px'
-                      }}>
-                        <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '20px' }}>
-                          <h4 style={{ fontSize: '1.125rem', fontWeight: '600', color: '#1f2937', margin: 0 }}>
-                            BSP Analysis & Recommendations
-                          </h4>
-                        </div>
-
-                        <div className="space-y-4">
-                        {/* BSP Gaps Detected */}
-                        {bspAnalysisData.bsp_analysis?.gaps_detected?.count > 0 && (
-                          <div style={{ backgroundColor: '#f5f3ff', borderRadius: '8px', padding: '16px' }}>
-                            <h5 style={{ fontSize: '1rem', fontWeight: '600', color: '#6b46c1', marginBottom: '12px', display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>
-                              <span>{bspAnalysisData.bsp_analysis.gaps_detected.title}</span>
-                              <span className="badge badge-light" style={{ fontSize: '0.75rem', padding: '4px 8px' }}>
-                                {bspAnalysisData.bsp_analysis.gaps_detected.count} Gaps
-                              </span>
-                            </h5>
-                            <div className="space-y-2">
-                              {(bspAnalysisData.bsp_analysis.gaps_detected.data || []).map((gap: any, idx: number) => (
-                                <div key={idx} style={{ backgroundColor: 'white', padding: '12px', borderRadius: '6px', borderLeft: '3px solid #a78bfa' }}>
-                                  <p style={{ fontSize: '0.875rem', color: '#1f2937' }}>{gap.description || gap}</p>
-                                </div>
-                              ))}
-                            </div>
-                          </div>
-                        )}
-
-
-
-                        {/* Draft BSP Update */}
-                        {bspAnalysisData.bsp_analysis.draft_update?.data && (
-                          <div style={{ backgroundColor: '#f5f3ff', borderRadius: '8px', padding: '16px' }}>
-                            <h5 style={{ fontSize: '1rem', fontWeight: '600', color: '#6b46c1', marginBottom: '12px' }}>
-                              {bspAnalysisData.bsp_analysis.draft_update.title}
-                            </h5>
-                            <div className="space-y-3">
-                              {bspAnalysisData.bsp_analysis.draft_update.data.context_of_behaviour && (
-                                <div style={{ backgroundColor: 'white', padding: '12px', borderRadius: '6px' }}>
-                                  <p style={{ fontSize: '0.75rem', fontWeight: '600', color: '#6b46c1', marginBottom: '6px' }}>Context of Behaviour</p>
-                                  <p style={{ fontSize: '0.875rem', color: '#1f2937' }}>{bspAnalysisData.bsp_analysis.draft_update.data.context_of_behaviour}</p>
-                                </div>
-                              )}
-                              {bspAnalysisData.bsp_analysis.draft_update.data.environmental_considerations && (
-                                <div style={{ backgroundColor: 'white', padding: '12px', borderRadius: '6px' }}>
-                                  <p style={{ fontSize: '0.75rem', fontWeight: '600', color: '#6b46c1', marginBottom: '6px' }}>Environmental Considerations</p>
-                                  <p style={{ fontSize: '0.875rem', color: '#1f2937' }}>{bspAnalysisData.bsp_analysis.draft_update.data.environmental_considerations}</p>
-                                </div>
-                              )}
-                              {bspAnalysisData.bsp_analysis.draft_update.data.trauma_informed_adjustments && (
-                                <div style={{ backgroundColor: 'white', padding: '12px', borderRadius: '6px' }}>
-                                  <p style={{ fontSize: '0.75rem', fontWeight: '600', color: '#6b46c1', marginBottom: '6px' }}>Trauma-Informed Adjustments</p>
-                                  <p style={{ fontSize: '0.875rem', color: '#1f2937' }}>{bspAnalysisData.bsp_analysis.draft_update.data.trauma_informed_adjustments}</p>
-                                </div>
-                              )}
-                              {bspAnalysisData.bsp_analysis.draft_update.data.safety_recommendations && (
-                                <div style={{ backgroundColor: 'white', padding: '12px', borderRadius: '6px' }}>
-                                  <p style={{ fontSize: '0.75rem', fontWeight: '600', color: '#6b46c1', marginBottom: '6px' }}>Safety Recommendations</p>
-                                  <p style={{ fontSize: '0.875rem', color: '#1f2937' }}>{bspAnalysisData.bsp_analysis.draft_update.data.safety_recommendations}</p>
-                                </div>
-                              )}
-                            </div>
-                          </div>
-                        )}
-
-                        {/* Trigger Alignment */}
-                        {bspAnalysisData.bsp_analysis.trigger_alignment?.data && (
-                          <div style={{ backgroundColor: '#f5f3ff', borderRadius: '8px', padding: '16px' }}>
-                            <h5 style={{ fontSize: '1rem', fontWeight: '600', color: '#6b46c1', marginBottom: '12px', display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>
-                              <span>{bspAnalysisData.bsp_analysis.trigger_alignment.title}</span>
-                              <span className="badge badge-light" style={{ fontSize: '0.75rem', padding: '4px 8px' }}>
-                                {bspAnalysisData.bsp_analysis.trigger_alignment.data.confidence_level || 'N/A'} Confidence
-                              </span>
-                            </h5>
-                            <div className="space-y-3">
-                              {bspAnalysisData.bsp_analysis.trigger_alignment.data.alignment_explanation && (
-                                <div style={{ backgroundColor: 'white', padding: '12px', borderRadius: '6px' }}>
-                                  <p style={{ fontSize: '0.875rem', color: '#1f2937' }}>{bspAnalysisData.bsp_analysis.trigger_alignment.data.alignment_explanation}</p>
-                                </div>
-                              )}
-                              {bspAnalysisData.bsp_analysis.trigger_alignment.data.matched_triggers?.length > 0 && (
-                                <div>
-                                  <p style={{ fontSize: '0.75rem', fontWeight: '600', color: '#6b46c1', marginBottom: '8px' }}>Matched Triggers</p>
-                                  <div className="space-y-2">
-                                    {(bspAnalysisData.bsp_analysis.trigger_alignment.data.matched_triggers || []).map((trigger: string, idx: number) => (
-                                      <div key={idx} style={{ backgroundColor: 'white', padding: '12px', borderRadius: '6px', borderLeft: '3px solid #a78bfa' }}>
-                                        <p style={{ fontSize: '0.875rem', color: '#1f2937' }}>{trigger}</p>
-                                      </div>
-                                    ))}
-                                  </div>
-                                </div>
-                              )}
-                            </div>
-                          </div>
-                        )}
-
-                        {/* Strategy Assessment */}
-                        {bspAnalysisData.bsp_analysis.strategy_assessment?.data && (
-                          <div style={{ backgroundColor: '#f5f3ff', borderRadius: '8px', padding: '16px' }}>
-                            <h5 style={{ fontSize: '1rem', fontWeight: '600', color: '#6b46c1', marginBottom: '12px' }}>
-                              {bspAnalysisData.bsp_analysis.strategy_assessment.title}
-                            </h5>
-                            <div className="space-y-3">
-                              {bspAnalysisData.bsp_analysis.strategy_assessment.data.staff_response_evaluation && (
-                                <div style={{ backgroundColor: 'white', padding: '12px', borderRadius: '6px' }}>
-                                  <p style={{ fontSize: '0.75rem', fontWeight: '600', color: '#6b46c1', marginBottom: '6px' }}>Staff Response Evaluation</p>
-                                  <p style={{ fontSize: '0.875rem', color: '#1f2937' }}>{bspAnalysisData.bsp_analysis.strategy_assessment.data.staff_response_evaluation}</p>
-                                </div>
-                              )}
-                              {bspAnalysisData.bsp_analysis.strategy_assessment.data.missing_proactive_strategies?.length > 0 && (
-                                <div>
-                                  <p style={{ fontSize: '0.75rem', fontWeight: '600', color: '#6b46c1', marginBottom: '8px' }}>Missing Proactive Strategies</p>
-                                  {(bspAnalysisData.bsp_analysis.strategy_assessment.data.missing_proactive_strategies || []).map((strategy: string, idx: number) => (
-                                    <div key={idx} style={{ backgroundColor: 'white', padding: '12px', borderRadius: '6px', borderLeft: '3px solid #a78bfa', marginBottom: '8px' }}>
-                                      <p style={{ fontSize: '0.875rem', color: '#1f2937' }}>{strategy}</p>
-                                    </div>
-                                  ))}
-                                </div>
-                              )}
-                              {bspAnalysisData.bsp_analysis.strategy_assessment.data.missed_reactive_strategies?.length > 0 && (
-                                <div>
-                                  <p style={{ fontSize: '0.75rem', fontWeight: '600', color: '#6b46c1', marginBottom: '8px' }}>Missed Reactive Strategies</p>
-                                  {(bspAnalysisData.bsp_analysis.strategy_assessment.data.missed_reactive_strategies || []).map((strategy: string, idx: number) => (
-                                    <div key={idx} style={{ backgroundColor: 'white', padding: '12px', borderRadius: '6px', borderLeft: '3px solid #a78bfa', marginBottom: '8px' }}>
-                                      <p style={{ fontSize: '0.875rem', color: '#1f2937' }}>{strategy}</p>
-                                    </div>
-                                  ))}
-                                </div>
-                              )}
-                            </div>
-                          </div>
-                        )}
-
-                        {/* Identified Gaps Summary */}
-                        {bspAnalysisData.bsp_analysis?.gaps_summary?.count > 0 && (
-                          <div style={{ backgroundColor: '#f5f3ff', borderRadius: '8px', padding: '16px' }}>
-                            <h5 style={{ fontSize: '1rem', fontWeight: '600', color: '#6b46c1', marginBottom: '12px', display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>
-                              <span>{bspAnalysisData.bsp_analysis.gaps_summary.title}</span>
-                              <span className="badge badge-light" style={{ fontSize: '0.75rem', padding: '4px 8px' }}>
-                                {bspAnalysisData.bsp_analysis.gaps_summary.count} Issues
-                              </span>
-                            </h5>
-                            <div className="space-y-2">
-                              {(bspAnalysisData.bsp_analysis.gaps_summary.data || []).map((gap: any, idx: number) => (
-                                <div key={idx} style={{ backgroundColor: 'white', padding: '12px', borderRadius: '6px', borderLeft: '3px solid #a78bfa' }}>
-                                  <p style={{ fontSize: '0.875rem', color: '#1f2937' }}>{typeof gap === 'string' ? gap : gap.description || gap.gap || JSON.stringify(gap)}</p>
-                                </div>
-                              ))}
-                            </div>
-                          </div>
-                        )}
-
-                        {/* BSP Internal Inconsistencies */}
-                        {bspAnalysisData.bsp_analysis?.inconsistencies?.count > 0 && (
-                          <div style={{ backgroundColor: '#f5f3ff', borderRadius: '8px', padding: '16px' }}>
-                            <h5 style={{ fontSize: '1rem', fontWeight: '600', color: '#6b46c1', marginBottom: '12px', display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>
-                              <span>{bspAnalysisData.bsp_analysis.inconsistencies.title}</span>
-                              <span className="badge badge-light" style={{ fontSize: '0.75rem', padding: '4px 8px' }}>
-                                {bspAnalysisData.bsp_analysis.inconsistencies.count} Found
-                              </span>
-                            </h5>
-                            <div className="space-y-2">
-                              {(bspAnalysisData.bsp_analysis.inconsistencies.data || []).map((inconsistency: any, idx: number) => (
-                                <div key={idx} style={{ backgroundColor: 'white', padding: '12px', borderRadius: '6px', borderLeft: '3px solid #a78bfa' }}>
-                                  <p style={{ fontSize: '0.875rem', color: '#1f2937' }}>{typeof inconsistency === 'string' ? inconsistency : inconsistency.description || inconsistency.inconsistency || JSON.stringify(inconsistency)}</p>
-                                </div>
-                              ))}
-                            </div>
-                          </div>
-                        )}
-
-                        {/* Potentially Outdated Strategies */}
-                        {bspAnalysisData.bsp_analysis?.outdated_strategies?.count > 0 && (
-                          <div style={{ backgroundColor: '#f5f3ff', borderRadius: '8px', padding: '16px' }}>
-                            <h5 style={{ fontSize: '1rem', fontWeight: '600', color: '#6b46c1', marginBottom: '12px', display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>
-                              <span>{bspAnalysisData.bsp_analysis.outdated_strategies.title}</span>
-                              <span className="badge badge-light" style={{ fontSize: '0.75rem', padding: '4px 8px' }}>
-                                {bspAnalysisData.bsp_analysis.outdated_strategies.count} Strategies
-                              </span>
-                            </h5>
-                            <div className="space-y-3">
-                              {(bspAnalysisData.bsp_analysis.outdated_strategies.data || []).map((item: any, idx: number) => (
-                                <div key={idx} style={{ backgroundColor: 'white', padding: '12px', borderRadius: '6px' }}>
-                                  <p style={{ fontSize: '0.875rem', fontWeight: '600', color: '#1f2937', marginBottom: '8px' }}>{item.strategy || item}</p>
-                                  {item.reason && (
-                                    <p style={{ fontSize: '0.75rem', color: '#6b7280', marginBottom: '4px' }}><strong>Reason:</strong> {item.reason}</p>
-                                  )}
-                                  {item.suggested_update && (
-                                    <p style={{ fontSize: '0.75rem', color: '#6b7280' }}><strong>Suggested Update:</strong> {item.suggested_update}</p>
-                                  )}
-                                </div>
-                              ))}
-                            </div>
-                          </div>
-                        )}
-
-                        {/* Skill Building Opportunities */}
-                        {bspAnalysisData.bsp_analysis?.skill_building?.count > 0 && (
-                          <div style={{ backgroundColor: '#f5f3ff', borderRadius: '8px', padding: '16px' }}>
-                            <h5 style={{ fontSize: '1rem', fontWeight: '600', color: '#6b46c1', marginBottom: '12px', display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>
-                              <span>{bspAnalysisData.bsp_analysis.skill_building.title}</span>
-                              <span className="badge badge-light" style={{ fontSize: '0.75rem', padding: '4px 8px' }}>
-                                {bspAnalysisData.bsp_analysis.skill_building.count} Opportunities
-                              </span>
-                            </h5>
-                            <div className="space-y-3">
-                              {(bspAnalysisData.bsp_analysis.skill_building.data || []).map((item: any, idx: number) => (
-                                <div key={idx} style={{ backgroundColor: 'white', padding: '12px', borderRadius: '6px' }}>
-                                  {item.skill_area && (
-                                    <span className="badge badge-sm badge-light" style={{ fontSize: '0.75rem', padding: '4px 8px', marginBottom: '8px', display: 'inline-block' }}>
-                                      {item.skill_area}
-                                    </span>
-                                  )}
-                                  {item.recommendation && (
-                                    <p style={{ fontSize: '0.875rem', color: '#1f2937', marginBottom: '8px' }}><strong>Recommendation:</strong> {item.recommendation}</p>
-                                  )}
-                                  {item.functional_basis && (
-                                    <p style={{ fontSize: '0.75rem', color: '#6b7280' }}><strong>Functional Basis:</strong> {item.functional_basis}</p>
-                                  )}
-                                  {!item.recommendation && !item.functional_basis && (
-                                    <p style={{ fontSize: '0.875rem', color: '#1f2937' }}>{item}</p>
-                                  )}
-                                </div>
-                              ))}
-                            </div>
-                          </div>
-                        )}
-
-                        {/* Risk Insights */}
-                        {bspAnalysisData.bsp_analysis.risk_insights?.data && (
-                          <div style={{ backgroundColor: '#f5f3ff', borderRadius: '8px', padding: '16px' }}>
-                            <h5 style={{ fontSize: '1rem', fontWeight: '600', color: '#6b46c1', marginBottom: '12px', display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>
-                              <span>{bspAnalysisData.bsp_analysis.risk_insights.title}</span>
-                              <span className={`badge badge-lg ${
-                                bspAnalysisData.bsp_analysis.risk_insights.data.recurrence_risk === 'high' ? 'badge-danger' :
-                                bspAnalysisData.bsp_analysis.risk_insights.data.recurrence_risk === 'medium' ? 'badge-warning' : 'badge-success'
-                              }`} style={{ fontSize: '0.75rem', padding: '4px 8px' }}>
-                                {bspAnalysisData.bsp_analysis.risk_insights.data.recurrence_risk || 'N/A'} Risk
-                              </span>
-                            </h5>
-                            <div className="space-y-3">
-                              {bspAnalysisData.bsp_analysis.risk_insights.data.risk_mitigation_summary && (
-                                <div style={{ backgroundColor: 'white', padding: '12px', borderRadius: '6px' }}>
-                                  <p style={{ fontSize: '0.75rem', fontWeight: '600', color: '#6b46c1', marginBottom: '6px' }}>Risk Mitigation Summary</p>
-                                  <p style={{ fontSize: '0.875rem', color: '#1f2937' }}>{bspAnalysisData.bsp_analysis.risk_insights.data.risk_mitigation_summary}</p>
-                                </div>
-                              )}
-                              {bspAnalysisData.bsp_analysis.risk_insights.data.environmental_risk_factors?.length > 0 && (
-                                <div>
-                                  <p style={{ fontSize: '0.75rem', fontWeight: '600', color: '#6b46c1', marginBottom: '8px' }}>Environmental Risk Factors</p>
-                                  {(bspAnalysisData.bsp_analysis.risk_insights.data.environmental_risk_factors || []).map((factor: string, idx: number) => (
-                                    <div key={idx} style={{ backgroundColor: 'white', padding: '12px', borderRadius: '6px', borderLeft: '3px solid #a78bfa', marginBottom: '8px' }}>
-                                      <p style={{ fontSize: '0.875rem', color: '#1f2937' }}>{factor}</p>
-                                    </div>
-                                  ))}
-                                </div>
-                              )}
-                              {bspAnalysisData.bsp_analysis.risk_insights.data.behavioural_risk_factors?.length > 0 && (
-                                <div>
-                                  <p style={{ fontSize: '0.75rem', fontWeight: '600', color: '#6b46c1', marginBottom: '8px' }}>Behavioural Risk Factors</p>
-                                  {(bspAnalysisData.bsp_analysis.risk_insights.data.behavioural_risk_factors || []).map((factor: string, idx: number) => (
-                                    <div key={idx} style={{ backgroundColor: 'white', padding: '12px', borderRadius: '6px', borderLeft: '3px solid #a78bfa', marginBottom: '8px' }}>
-                                      <p style={{ fontSize: '0.875rem', color: '#1f2937' }}>{factor}</p>
-                                    </div>
-                                  ))}
-                                </div>
-                              )}
-                            </div>
-                          </div>
-                        )}
-
-                        {/* NDIS Compliance Assessment */}
-                        {bspAnalysisData.bsp_analysis.compliance?.data && (
-                          <div style={{ backgroundColor: '#f5f3ff', borderRadius: '8px', padding: '16px' }}>
-                            <h5 style={{ fontSize: '1rem', fontWeight: '600', color: '#6b46c1', marginBottom: '12px', display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>
-                              <span>{bspAnalysisData.bsp_analysis.compliance.title}</span>
-                              <span className={`badge badge-lg ${
-                                bspAnalysisData.bsp_analysis.compliance.data.compliance_level === 'compliant' ? 'badge-success' :
-                                bspAnalysisData.bsp_analysis.compliance.data.compliance_level === 'partial' ? 'badge-warning' : 'badge-danger'
-                              }`} style={{ fontSize: '0.75rem', padding: '4px 8px' }}>
-                                {bspAnalysisData.bsp_analysis.compliance.data.compliance_level || 'N/A'}
-                              </span>
-                            </h5>
-                            <div className="grid md:grid-cols-2 gap-4">
-                              {bspAnalysisData.bsp_analysis.compliance.data.person_centred_practice && (
-                                <div style={{ backgroundColor: 'white', padding: '12px', borderRadius: '6px' }}>
-                                  <p style={{ fontSize: '0.75rem', fontWeight: '600', color: '#6b46c1', marginBottom: '6px' }}>Person-Centred Practice</p>
-                                  <div className="flex items-center justify-between">
-                                    <span className={`badge ${bspAnalysisData.bsp_analysis.compliance.data.person_centred_practice.status === 'compliant' ? 'badge-success' : 'badge-danger'}`} style={{ fontSize: '0.75rem', padding: '4px 8px' }}>
-                                      {bspAnalysisData.bsp_analysis.compliance.data.person_centred_practice.status}
-                                    </span>
-                                  </div>
-                                  {bspAnalysisData.bsp_analysis.compliance.data.person_centred_practice.notes && (
-                                    <p style={{ fontSize: '0.75rem', color: '#1f2937', marginTop: '8px' }}>{bspAnalysisData.bsp_analysis.compliance.data.person_centred_practice.notes}</p>
-                                  )}
-                                </div>
-                              )}
-                              {bspAnalysisData.bsp_analysis.compliance.data.positive_behaviour_support_framework && (
-                                <div style={{ backgroundColor: 'white', padding: '12px', borderRadius: '6px' }}>
-                                  <p style={{ fontSize: '0.75rem', fontWeight: '600', color: '#6b46c1', marginBottom: '6px' }}>PBS Framework</p>
-                                  <div className="flex items-center justify-between">
-                                    <span className={`badge ${bspAnalysisData.bsp_analysis.compliance.data.positive_behaviour_support_framework.status === 'compliant' ? 'badge-success' : 'badge-danger'}`} style={{ fontSize: '0.75rem', padding: '4px 8px' }}>
-                                      {bspAnalysisData.bsp_analysis.compliance.data.positive_behaviour_support_framework.status}
-                                    </span>
-                                  </div>
-                                  {bspAnalysisData.bsp_analysis.compliance.data.positive_behaviour_support_framework.notes && (
-                                    <p style={{ fontSize: '0.75rem', color: '#1f2937', marginTop: '8px' }}>{bspAnalysisData.bsp_analysis.compliance.data.positive_behaviour_support_framework.notes}</p>
-                                  )}
-                                </div>
-                              )}
-                              {bspAnalysisData.bsp_analysis.compliance.data.restrictive_practice_documentation && (
-                                <div style={{ backgroundColor: 'white', padding: '12px', borderRadius: '6px' }}>
-                                  <p style={{ fontSize: '0.75rem', fontWeight: '600', color: '#6b46c1', marginBottom: '6px' }}>Restrictive Practice Documentation</p>
-                                  <div className="flex items-center justify-between">
-                                    <span className={`badge ${bspAnalysisData.bsp_analysis.compliance.data.restrictive_practice_documentation.status === 'compliant' ? 'badge-success' : 'badge-danger'}`} style={{ fontSize: '0.75rem', padding: '4px 8px' }}>
-                                      {bspAnalysisData.bsp_analysis.compliance.data.restrictive_practice_documentation.status}
-                                    </span>
-                                  </div>
-                                  {bspAnalysisData.bsp_analysis.compliance.data.restrictive_practice_documentation.notes && (
-                                    <p style={{ fontSize: '0.75rem', color: '#1f2937', marginTop: '8px' }}>{bspAnalysisData.bsp_analysis.compliance.data.restrictive_practice_documentation.notes}</p>
-                                  )}
-                                </div>
-                              )}
-                              {bspAnalysisData.bsp_analysis.compliance.data.environment_safety_obligations && (
-                                <div style={{ backgroundColor: 'white', padding: '12px', borderRadius: '6px' }}>
-                                  <p style={{ fontSize: '0.75rem', fontWeight: '600', color: '#6b46c1', marginBottom: '6px' }}>Environment Safety</p>
-                                  <div className="flex items-center justify-between">
-                                    <span className={`badge ${bspAnalysisData.bsp_analysis.compliance.data.environment_safety_obligations.status === 'compliant' ? 'badge-success' : 'badge-danger'}`} style={{ fontSize: '0.75rem', padding: '4px 8px' }}>
-                                      {bspAnalysisData.bsp_analysis.compliance.data.environment_safety_obligations.status}
-                                    </span>
-                                  </div>
-                                  {bspAnalysisData.bsp_analysis.compliance.data.environment_safety_obligations.notes && (
-                                    <p style={{ fontSize: '0.75rem', color: '#1f2937', marginTop: '8px' }}>{bspAnalysisData.bsp_analysis.compliance.data.environment_safety_obligations.notes}</p>
-                                  )}
-                                </div>
-                              )}
-                              {bspAnalysisData.bsp_analysis.compliance.data.incident_documentation_standards && (
-                                <div style={{ backgroundColor: 'white', padding: '12px', borderRadius: '6px' }}>
-                                  <p style={{ fontSize: '0.75rem', fontWeight: '600', color: '#6b46c1', marginBottom: '6px' }}>Incident Documentation</p>
-                                  <div className="flex items-center justify-between">
-                                    <span className={`badge ${bspAnalysisData.bsp_analysis.compliance.data.incident_documentation_standards.status === 'compliant' ? 'badge-success' : 'badge-danger'}`} style={{ fontSize: '0.75rem', padding: '4px 8px' }}>
-                                      {bspAnalysisData.bsp_analysis.compliance.data.incident_documentation_standards.status}
-                                    </span>
-                                  </div>
-                                  {bspAnalysisData.bsp_analysis.compliance.data.incident_documentation_standards.notes && (
-                                    <p style={{ fontSize: '0.75rem', color: '#1f2937', marginTop: '8px' }}>{bspAnalysisData.bsp_analysis.compliance.data.incident_documentation_standards.notes}</p>
-                                  )}
-                                </div>
-                              )}
-                            </div>
-                          </div>
-                        )}
-                        </div>
-                      </div>
-                    ) : (
-                      <div style={{
-                        backgroundColor: '#eff6ff',
-                        borderLeft: '4px solid #6b46c1',
-                        borderRadius: '8px',
-                        padding: '24px',
-                        marginBottom: '24px'
-                      }}>
-                        <div style={{
-                          display: 'flex',
-                          justifyContent: 'space-between',
-                          alignItems: 'flex-start',
-                          marginBottom: '24px'
-                        }}>
-                          <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
-                            <i className="ki-outline ki-abstract-26" style={{ fontSize: '24px', color: '#6b46c1' }}></i>
-                            <h4 style={{ fontSize: '1.125rem', fontWeight: '600', color: '#1f2937', margin: 0 }}>
-                              AI-Powered BSP Analysis
-                            </h4>
-                          </div>
-                          <button
-                            type="button"
-                            className="btn btn-sm btn-primary"
-                            onClick={() => selectedIncidentDetails && handleRunBspAnalysis(selectedIncidentDetails.id)}
-                            style={{ cursor: 'pointer' }}
-                          >
-                            <i className="ki-outline ki-abstract-26 text-sm mr-1"></i>
-                            Run BSP Analysis
-                          </button>
-                        </div>
-                        <div style={{
-                          display: 'flex',
-                          flexDirection: 'column',
-                          alignItems: 'center',
-                          justifyContent: 'center',
-                          padding: '60px 20px'
-                        }}>
-                          <i className="ki-outline ki-abstract-26" style={{
-                            fontSize: '64px',
-                            color: '#60a5fa',
-                            marginBottom: '20px'
-                          }}></i>
-                          <p style={{
-                            fontSize: '1rem',
-                            color: '#3b82f6',
-                            fontWeight: '500',
-                            marginBottom: '8px',
-                            textAlign: 'center'
-                          }}>
-                            Click "Run BSP Analysis" to analyse this incident
-                          </p>
-                          <p style={{ fontSize: '0.875rem', color: '#60a5fa', textAlign: 'center' }}>
-                            Maps triggers, strategies, and risk factors against the participant's BSP
-                          </p>
-                        </div>
-                      </div>
-                    )}
-
-                    {/* SEPARATOR */}
-                    {bspAnalysisData?.bsp_analysis && (
-                      <div className="border-t-4 border-gray-300 my-6"></div>
-                    )}
-
-                    {/* Basic Information */}
-                    <div style={{
-                      backgroundColor: 'white',
-                      borderLeft: '4px solid #6b46c1',
-                      borderRadius: '8px',
-                      padding: '24px',
-                      marginBottom: '24px'
-                    }}>
-                      <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '20px' }}>
-                        <h4 style={{ fontSize: '1.125rem', fontWeight: '600', color: '#1f2937', margin: 0 }}>
-                          Basic Information
-                        </h4>
-                      </div>
-                      <div className="grid md:grid-cols-2 gap-6">
-                        <div>
-                          <p style={{ fontSize: '0.875rem', color: '#6b7280', marginBottom: '4px' }}>Incident Number</p>
-                          <p style={{ fontSize: '1rem', fontWeight: '600', color: '#111827' }}>{selectedIncidentDetails.incident_number}</p>
-                        </div>
-                        <div>
-                          <p style={{ fontSize: '0.875rem', color: '#6b7280', marginBottom: '4px' }}>Type</p>
-                          <p style={{ fontSize: '1rem', color: '#111827' }}>
-                            {typeof selectedIncidentDetails.incident_type === 'object' && selectedIncidentDetails.incident_type?.name
-                              ? selectedIncidentDetails.incident_type.name
-                              : selectedIncidentDetails.incident_type || 'N/A'}
-                          </p>
-                        </div>
-                        <div>
-                          <p style={{ fontSize: '0.875rem', color: '#6b7280', marginBottom: '4px' }}>Severity</p>
-                          <span className={`badge ${getSeverityBadgeClass(selectedIncidentDetails.severity)}`} style={{ fontSize: '0.875rem', padding: '4px 12px' }}>
-                            {selectedIncidentDetails.severity}
-                          </span>
-                        </div>
-                        <div>
-                          <p style={{ fontSize: '0.875rem', color: '#6b7280', marginBottom: '4px' }}>Status</p>
-                          <span className={`badge ${getStatusBadgeClass(selectedIncidentDetails.status)}`} style={{ fontSize: '0.875rem', padding: '4px 12px' }}>
-                            {selectedIncidentDetails.status || 'Draft'}
-                          </span>
-                        </div>
-                        <div>
-                          <p style={{ fontSize: '0.875rem', color: '#6b7280', marginBottom: '4px' }}>Date & Time</p>
-                          <p style={{ fontSize: '1rem', color: '#111827' }}>
-                            {formatDateTime(selectedIncidentDetails.incident_date_time).date} at {formatDateTime(selectedIncidentDetails.incident_date_time).time}
-                          </p>
-                        </div>
-                        <div>
-                          <p style={{ fontSize: '0.875rem', color: '#6b7280', marginBottom: '4px' }}>Location</p>
-                          <p style={{ fontSize: '1rem', color: '#111827' }}>{selectedIncidentDetails.location || 'N/A'}</p>
-                        </div>
-                      </div>
-                    </div>
-
-                    {/* People Involved */}
-                    <div style={{
-                      backgroundColor: 'white',
-                      borderLeft: '4px solid #6b46c1',
-                      borderRadius: '8px',
-                      padding: '24px',
-                      marginBottom: '24px'
-                    }}>
-                      <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '20px' }}>
-                        <h4 style={{ fontSize: '1.125rem', fontWeight: '600', color: '#1f2937', margin: 0 }}>
-                          People Involved
-                        </h4>
-                      </div>
-                      <div className="grid md:grid-cols-2 gap-6">
-                        <div>
-                          <p style={{ fontSize: '0.875rem', color: '#6b7280', marginBottom: '4px' }}>Participant</p>
-                          <p style={{ fontSize: '1rem', color: '#111827' }}>{selectedIncidentDetails.participant_name || 'N/A'}</p>
-                        </div>
-                        {selectedIncidentDetails.customer && (
-                          <div>
-                            <p style={{ fontSize: '0.875rem', color: '#6b7280', marginBottom: '4px' }}>Customer</p>
-                            <p style={{ fontSize: '1rem', color: '#111827' }}>
-                              {selectedIncidentDetails.customer.first_name} {selectedIncidentDetails.customer.last_name}
-                            </p>
-                          </div>
-                        )}
-                      </div>
-                    </div>
-
-                    {/* NDIS-Compliant Fields */}
-                    {selectedIncidentDetails.what_happened && (
-                      <div style={{
-                        backgroundColor: 'white',
-                        borderLeft: '4px solid #6b46c1',
-                        borderRadius: '8px',
-                        padding: '24px',
-                        marginBottom: '24px'
-                      }}>
-                        <div style={{
-                          display: 'flex',
-                          justifyContent: 'space-between',
-                          alignItems: 'center',
-                          marginBottom: '20px'
-                        }}>
-                          <h4 style={{ fontSize: '1.125rem', fontWeight: '600', color: '#1f2937', margin: 0 }}>
-                            NDIS-Compliant Fields
-                          </h4>
-                          <span className="badge badge-primary" style={{ fontSize: '0.75rem', padding: '4px 8px' }}>
-                            AI: 90%
-                          </span>
-                        </div>
-
-                        <div className="space-y-4">
-                          <div style={{
-                            backgroundColor: '#f5f3ff',
-                            borderRadius: '8px',
-                            padding: '16px'
-                          }}>
-                            <p style={{ fontSize: '0.875rem', fontWeight: '600', color: '#6b46c1', marginBottom: '8px' }}>
-                              What Happened (Observable Facts)
-                            </p>
-                            <p style={{ fontSize: '0.875rem', color: '#1f2937', lineHeight: '1.5', whiteSpace: 'pre-wrap' }}>
-                              {selectedIncidentDetails.what_happened}
-                            </p>
-                          </div>
-
-                          {selectedIncidentDetails.lead_up_triggers && (
-                            <div style={{
-                              backgroundColor: '#f5f3ff',
-                              borderRadius: '8px',
-                              padding: '16px'
-                            }}>
-                              <p style={{ fontSize: '0.875rem', fontWeight: '600', color: '#6b46c1', marginBottom: '8px' }}>
-                                Lead-Up & Triggers
-                              </p>
-                              <p style={{ fontSize: '0.875rem', color: '#1f2937', lineHeight: '1.5', whiteSpace: 'pre-wrap' }}>
-                                {selectedIncidentDetails.lead_up_triggers}
-                              </p>
-                            </div>
-                          )}
-
-                          {selectedIncidentDetails.during_incident && (
-                            <div style={{
-                              backgroundColor: '#f5f3ff',
-                              borderRadius: '8px',
-                              padding: '16px'
-                            }}>
-                              <p style={{ fontSize: '0.875rem', fontWeight: '600', color: '#6b46c1', marginBottom: '8px' }}>
-                                During the Incident (Observable Behaviours)
-                              </p>
-                              <p style={{ fontSize: '0.875rem', color: '#1f2937', lineHeight: '1.5', whiteSpace: 'pre-wrap' }}>
-                                {selectedIncidentDetails.during_incident}
-                              </p>
-                            </div>
-                          )}
-
-                          {selectedIncidentDetails.response_actions && (
-                            <div style={{
-                              backgroundColor: '#f5f3ff',
-                              borderRadius: '8px',
-                              padding: '16px'
-                            }}>
-                              <p style={{ fontSize: '0.875rem', fontWeight: '600', color: '#6b46c1', marginBottom: '8px' }}>
-                                Response Actions Taken
-                              </p>
-                              <p style={{ fontSize: '0.875rem', color: '#1f2937', lineHeight: '1.5', whiteSpace: 'pre-wrap' }}>
-                                {selectedIncidentDetails.response_actions}
-                              </p>
-                            </div>
-                          )}
-
-                          {selectedIncidentDetails.causes_contributing_factors && (
-                            <div style={{
-                              backgroundColor: '#f5f3ff',
-                              borderRadius: '8px',
-                              padding: '16px'
-                            }}>
-                              <p style={{ fontSize: '0.875rem', fontWeight: '600', color: '#6b46c1', marginBottom: '8px' }}>
-                                Causes & Contributing Factors
-                              </p>
-                              <p style={{ fontSize: '0.875rem', color: '#1f2937', lineHeight: '1.5', whiteSpace: 'pre-wrap' }}>
-                                {selectedIncidentDetails.causes_contributing_factors}
-                              </p>
-                            </div>
-                          )}
-
-                          {selectedIncidentDetails.description && (
-                            <div style={{
-                              backgroundColor: 'white',
-                              border: '1px solid #e5e7eb',
-                              borderRadius: '8px',
-                              padding: '16px'
-                            }}>
-                              <p style={{ fontSize: '0.875rem', fontWeight: '600', color: '#6b7280', marginBottom: '8px' }}>
-                                Original Full Description
-                              </p>
-                              <p style={{ fontSize: '0.875rem', color: '#1f2937', lineHeight: '1.5', whiteSpace: 'pre-wrap' }}>
-                                {selectedIncidentDetails.description}
-                              </p>
-                            </div>
-                          )}
-                        </div>
-                      </div>
-                    )}
-
-                    {/* Injury & Medical */}
-                    <div style={{
-                      backgroundColor: 'white',
-                      borderLeft: '4px solid #dc2626',
-                      borderRadius: '8px',
-                      padding: '24px',
-                      marginBottom: '24px'
-                    }}>
-                      <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '20px' }}>
-                        <h4 style={{ fontSize: '1.125rem', fontWeight: '600', color: '#1f2937', margin: 0 }}>
-                          Injury & Medical
-                        </h4>
-                      </div>
-                      <div className="grid md:grid-cols-2 gap-4">
-                        <div style={{
-                          backgroundColor: '#fef2f2',
-                          borderRadius: '8px',
-                          padding: '16px'
-                        }}>
-                          <p style={{ fontSize: '0.875rem', fontWeight: '600', color: '#dc2626', marginBottom: '8px' }}>
-                            Injury Occurred
-                          </p>
-                          <p style={{ fontSize: '1.125rem', fontWeight: '600', color: selectedIncidentDetails.injury_occurred ? '#dc2626' : '#10b981', display: 'flex', alignItems: 'center', gap: '4px' }}>
-                            <span>{selectedIncidentDetails.injury_occurred ? '‚úì' : '‚úó'}</span>
-                            <span>{selectedIncidentDetails.injury_occurred ? 'Yes' : 'No'}</span>
-                          </p>
-                        </div>
-                        <div style={{
-                          backgroundColor: '#fef2f2',
-                          borderRadius: '8px',
-                          padding: '16px'
-                        }}>
-                          <p style={{ fontSize: '0.875rem', fontWeight: '600', color: '#dc2626', marginBottom: '8px' }}>
-                            Medical Treatment Required
-                          </p>
-                          <p style={{ fontSize: '1.125rem', fontWeight: '600', color: selectedIncidentDetails.medical_treatment_required ? '#dc2626' : '#10b981', display: 'flex', alignItems: 'center', gap: '4px' }}>
-                            <span>{selectedIncidentDetails.medical_treatment_required ? '‚úì' : '‚úó'}</span>
-                            <span>{selectedIncidentDetails.medical_treatment_required ? 'Yes' : 'No'}</span>
-                          </p>
-                        </div>
-                      </div>
-                      {selectedIncidentDetails.injury_details && (
-                        <div style={{ marginTop: '16px' }}>
-                          <div style={{
-                            backgroundColor: '#fef2f2',
-                            borderRadius: '8px',
-                            padding: '16px'
-                          }}>
-                            <p style={{ fontSize: '0.875rem', fontWeight: '600', color: '#dc2626', marginBottom: '8px' }}>
-                              Injury Details
-                            </p>
-                            <p style={{ fontSize: '0.875rem', color: '#1f2937', lineHeight: '1.5', whiteSpace: 'pre-wrap' }}>
-                              {selectedIncidentDetails.injury_details}
-                            </p>
-                          </div>
-                        </div>
-                      )}
-                    </div>
-
-                    {/* Notifications & Reporting */}
-                    <div style={{
-                      backgroundColor: 'white',
-                      borderLeft: '4px solid #10b981',
-                      borderRadius: '8px',
-                      padding: '24px',
-                      marginBottom: '24px'
-                    }}>
-                      <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '20px' }}>
-                        <h4 style={{ fontSize: '1.125rem', fontWeight: '600', color: '#1f2937', margin: 0 }}>
-                          Notifications & Reporting
-                        </h4>
-                      </div>
-                      <div className="grid md:grid-cols-2 gap-4">
-                        <div style={{
-                          backgroundColor: '#ecfdf5',
-                          borderRadius: '8px',
-                          padding: '16px'
-                        }}>
-                          <p style={{ fontSize: '0.875rem', fontWeight: '600', color: '#10b981', marginBottom: '8px' }}>
-                            NDIS Reportable
-                          </p>
-                          <p style={{ fontSize: '1.125rem', fontWeight: '600', color: selectedIncidentDetails.is_ndis_reportable ? '#10b981' : '#dc2626', display: 'flex', alignItems: 'center', gap: '4px' }}>
-                            <span>{selectedIncidentDetails.is_ndis_reportable ? '‚úì' : '‚úó'}</span>
-                            <span>{selectedIncidentDetails.is_ndis_reportable ? 'Yes' : 'No'}</span>
-                          </p>
-                        </div>
-                        <div style={{
-                          backgroundColor: '#ecfdf5',
-                          borderRadius: '8px',
-                          padding: '16px'
-                        }}>
-                          <p style={{ fontSize: '0.875rem', fontWeight: '600', color: '#10b981', marginBottom: '8px' }}>
-                            Police Notified
-                          </p>
-                          <p style={{ fontSize: '1.125rem', fontWeight: '600', color: selectedIncidentDetails.police_notified ? '#10b981' : '#dc2626', display: 'flex', alignItems: 'center', gap: '4px' }}>
-                            <span>{selectedIncidentDetails.police_notified ? '‚úì' : '‚úó'}</span>
-                            <span>{selectedIncidentDetails.police_notified ? 'Yes' : 'No'}</span>
-                          </p>
-                        </div>
-                      </div>
-                      {selectedIncidentDetails.notification_made_to && (
-                        <div style={{ marginTop: '16px' }}>
-                          <div style={{
-                            backgroundColor: '#ecfdf5',
-                            borderRadius: '8px',
-                            padding: '16px'
-                          }}>
-                            <p style={{ fontSize: '0.875rem', fontWeight: '600', color: '#10b981', marginBottom: '8px' }}>
-                              Notification Made To
-                            </p>
-                            <p style={{ fontSize: '0.875rem', color: '#1f2937', lineHeight: '1.5' }}>
-                              {selectedIncidentDetails.notification_made_to}
-                            </p>
-                            {selectedIncidentDetails.notification_date_time && (
-                              <p style={{ fontSize: '0.75rem', color: '#6b7280', marginTop: '4px' }}>
-                                on {formatDateTime(selectedIncidentDetails.notification_date_time).date} at {formatDateTime(selectedIncidentDetails.notification_date_time).time}
-                              </p>
-                            )}
-                          </div>
-                        </div>
-                      )}
-                    </div>
-
-                    {/* BSP Analysis */}
-                    {(selectedIncidentDetails.bsp_alignment_notes || selectedIncidentDetails.bsp_suggested_improvements) && (
-                      <div className="card bg-gray-50">
-                        <div className="card-body">
-                          <h4 className="text-lg font-bold text-gray-900 mb-4 flex items-center">
-                            <i className="ki-outline ki-note-2 text-xl mr-2 text-info"></i>
-                            BSP Analysis
-                          </h4>
-                          <div className="space-y-4">
-                            {selectedIncidentDetails.bsp_alignment_notes && (
-                              <div>
-                                <p className="text-sm font-semibold text-gray-600 mb-2">BSP Alignment Notes</p>
-                                <p className="text-base text-gray-900 leading-relaxed whitespace-pre-wrap">
-                                  {selectedIncidentDetails.bsp_alignment_notes}
-                                </p>
-                              </div>
-                            )}
-                            {selectedIncidentDetails.bsp_suggested_improvements && (
-                              <div>
-                                <p className="text-sm font-semibold text-gray-600 mb-2">BSP Suggested Improvements</p>
-                                <p className="text-base text-gray-900 leading-relaxed whitespace-pre-wrap">
-                                  {selectedIncidentDetails.bsp_suggested_improvements}
-                                </p>
-                              </div>
-                            )}
-                          </div>
-                        </div>
-                      </div>
-                    )}
-
-                    {/* Risk Assessment & Follow-up */}
-                    <div style={{
-                      backgroundColor: 'white',
-                      borderLeft: '4px solid #dc2626',
-                      borderRadius: '8px',
-                      padding: '24px',
-                      marginBottom: '24px'
-                    }}>
-                      <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '20px' }}>
-                        <h4 style={{ fontSize: '1.125rem', fontWeight: '600', color: '#1f2937', margin: 0 }}>
-                          Risk Assessment & Follow-up
-                        </h4>
-                      </div>
-                      <div className="grid md:grid-cols-2 gap-4">
-                        <div style={{
-                          backgroundColor: '#fef2f2',
-                          borderRadius: '8px',
-                          padding: '16px'
-                        }}>
-                          <p style={{ fontSize: '0.875rem', fontWeight: '600', color: '#dc2626', marginBottom: '8px' }}>
-                            Recurrence Likelihood
-                          </p>
-                          <p style={{ fontSize: '1rem', color: '#1f2937' }}>
-                            {selectedIncidentDetails.recurrence_likelihood || 'Not Assessed'}
-                          </p>
-                        </div>
-                        <div style={{
-                          backgroundColor: '#fef2f2',
-                          borderRadius: '8px',
-                          padding: '16px'
-                        }}>
-                          <p style={{ fontSize: '0.875rem', fontWeight: '600', color: '#dc2626', marginBottom: '8px' }}>
-                            Follow-up Required
-                          </p>
-                          <p style={{ fontSize: '1.125rem', fontWeight: '600', color: selectedIncidentDetails.follow_up_required ? '#dc2626' : '#10b981', display: 'flex', alignItems: 'center', gap: '4px' }}>
-                            <span>{selectedIncidentDetails.follow_up_required ? '‚úì' : '‚úó'}</span>
-                            <span>{selectedIncidentDetails.follow_up_required ? 'Yes' : 'No'}</span>
-                          </p>
-                        </div>
-                      </div>
-                      {selectedIncidentDetails.follow_up_actions && selectedIncidentDetails.follow_up_required && (
-                        <div style={{ marginTop: '16px' }}>
-                          <div style={{
-                            backgroundColor: '#fef2f2',
-                            borderRadius: '8px',
-                            padding: '16px'
-                          }}>
-                            <p style={{ fontSize: '0.875rem', fontWeight: '600', color: '#dc2626', marginBottom: '8px' }}>
-                              Follow-up Actions
-                            </p>
-                            <p style={{ fontSize: '0.875rem', color: '#1f2937', lineHeight: '1.5', whiteSpace: 'pre-wrap' }}>
-                              {selectedIncidentDetails.follow_up_actions}
-                            </p>
-                          </div>
-                        </div>
-                      )}
-                    </div>
-
-                    {/* Additional Information */}
-                    {selectedIncidentDetails.additional_information && (
-                      <div className="card bg-gray-50">
-                        <div className="card-body">
-                          <h4 className="text-lg font-bold text-gray-900 mb-4 flex items-center">
-                            <i className="ki-outline ki-notepad text-xl mr-2 text-gray-600"></i>
-                            Additional Information
-                          </h4>
-                          <p className="text-base text-gray-900 leading-relaxed whitespace-pre-wrap">
-                            {selectedIncidentDetails.additional_information}
-                          </p>
-                        </div>
-                      </div>
-                    )}
-
-                    {/* AI Generated Report */}
-                    {selectedIncidentDetails.generated_report && (
-                      <div className="card bg-primary-light/10 border-2 border-primary">
-                        <div className="card-body">
-                          <h4 className="text-lg font-bold text-gray-900 mb-4 flex items-center">
-                            <i className="ki-outline ki-ai text-xl mr-2 text-primary"></i>
-                            AI-Generated Complete Report
-                          </h4>
-                          <div className="bg-white p-6 rounded-lg">
-                            <pre className="whitespace-pre-wrap font-sans text-sm text-gray-700 leading-relaxed">
-                              {selectedIncidentDetails.generated_report}
-                            </pre>
-                          </div>
-                        </div>
-                      </div>
-                    )}
-                  </div>
-                ) : (
-                  <div className="text-center py-10">
-                    <p className="text-gray-600">No incident details available.</p>
-                  </div>
-                )}
-              </div>
+      {/* Bulk Delete Confirmation Modal */}
+      <ModalDeleteConfirmation
+        open={isBulkDeleteModalOpen}
+        onOpenChange={() => setIsBulkDeleteModalOpen(false)}
+        onDeleteConfirm={handleBulkDelete}
+      />
 
-              {/* Modal Footer */}
-              <div className="modal-footer" style={{ padding: '16px 24px', borderTop: '1px solid #e5e7eb', display: 'flex', justifyContent: 'flex-end' }}>
-                <button
-                  type="button"
-                  className="btn btn-light"
-                  onClick={closeReportModal}
-                  style={{ cursor: 'pointer' }}
-                >
-                  Close
-                </button>
-              </div>
-            </div>
-          </div>
-        </div>
-      )}
+      {/* Report Modal */}
+      <IncidentDetailsModal
+        showModal={showReportModal}
+        onClose={closeReportModal}
+        selectedIncidentDetails={selectedIncidentDetails}
+        loadingReport={loadingReport}
+        bspAnalysisData={bspAnalysisData}
+        loadingBspAnalysis={loadingBspAnalysis}
+        activeModalTab={activeModalTab}
+        setActiveModalTab={setActiveModalTab}
+        collapsedSections={collapsedSections}
+        toggleSection={toggleSection}
+        handleRunBspAnalysis={handleRunBspAnalysis}
+        exportIncidentPdf={exportIncidentPdf}
+        onDelete={(id) => {
+          setSelectedId(id);
+          setIsModalOpen(true);
+        }}
+        formatDateTime={formatDateTime}
+        getStatusBadgeClass={getStatusBadgeClass}
+        getSeverityBadgeClass={getSeverityBadgeClass}
+      />
     </>
   );
 };
